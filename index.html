<!DOCTYPE html>
<!-- saved from url=(0141)file:///E:/CODE/maimai-anti15webside/maimai%E3%81%A7%E3%82%89%E3%81%A3%E3%81%8F%E3%81%99NET%EF%BC%8D%E3%83%9B%E3%83%BC%E3%83%A0%EF%BC%8D.html -->
<html lang="zh"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=yes,shrink-to-fit=no">
	<script> 
		var baseW = 768;
		var iOSW = 0;
		var ua = navigator.userAgent.toLowerCase();
		var isiOS = (ua.indexOf("iphone") > -1) || (ua.indexOf("ipod") > -1) || (ua.indexOf("ipad") > -1);
		if(isiOS){
			iOSW = document.documentElement.clientWidth;
		}
		window.addEventListener("resize", updateMetaViewport, false);
		window.addEventListener("orientationchange", updateMetaViewport, false);
		var ev = document.createEvent("UIEvent");
		ev.initEvent("resize", true, true)
		window.dispatchEvent(ev);
		function updateMetaViewport(){
			var viewportContent;
			var w = window.outerWidth;
			if(isiOS){
				w = iOSW;
			}
			if(w < baseW){
				viewportContent = "width=480,initial-scale=" + w/480 + ",user-scalable=yes,shrink-to-fit=no";
			}else{
				viewportContent = "width=device-width,initial-scale=1.0,user-scalable=yes,shrink-to-fit=no";
			}
			document.querySelector("meta[name='viewport']").setAttribute("content", viewportContent);
		}
	</script>


	<title>maimaiでらっくす</title>
	<link rel="stylesheet" href="./index_files/common.css">

	</head><body><div class="wrapper t_c">
					<div class="spmenu_toggle"></div>
				<img src="./index_files/logo.png" class="logo p_5">
			</div>
	<div class="wrapper main_wrapper t_c">

<div class="see_through_block m_15 m_t_10 p_10 p_r t_l f_0">
	<div class="basic_block p_10 f_0">
				<img loading="lazy" src="./index_files/saved_resource" class="w_112 f_l">
		<div class="p_l_10 f_l">
			<div class="trophy_block trophy_Normal p_3 t_c f_0">
				<div class="trophy_inner_block f_13">
					<div >该设备已访问 ↓↓ 次</div>
				</div>
			</div>
			<div class="m_b_5">
				<div class="name_block f_l f_16">THIS IS NAME!</div>
				<div class="f_r t_r f_0">
					<div class="p_r p_3">
						<img src="./index_files/rating_base_normal.png" class="h_30 f_r">
						<div class="rating_block" id="localStorage.pagecount" >0</div>
					</div>
				</div>
				<div class="clearfix"></div>
			</div>
			<img src="./index_files/line_01.png" class="user_data_block_line">
			<div class="clearfix"></div>
			<img src="./index_files/course_rank_00T7GHJvGe.png" class="h_35 f_l">
			<img src="./index_files/class_rank_s_00ZqZmdpb8.png" class="p_l_10 h_35 f_l">
			<div class="p_l_10 f_l f_14"><img src="./index_files/icon_star.png" class="h_30 m_3 v_m"></div>
		</div>
		<div class="clearfix"></div>
	</div>
	<img loading="lazy" src="./index_files/bab779e7ab508427.png" class="w_120 m_t_10 f_r">
		<input type="text" minlength="2" id="myInput" placeholder="扫描或输入SGWCMAID..." required="" class="comment_block break f_l f_12">	
		<div id="unlock.result" class="name_block f_l f_16"> </div>
	<div class="clearfix"></div>



<div class="town_block m_15 p_15">
		<button id="upload" onclick="postData()">
			<img src="./index_files/logout.png" alt="提交" class="w_120 m_15 m_t_5">
		</button>
		<button id="startButton" onclick="scanQR()">
			<img src="./index_files/camara.png" alt="扫码">
		</button>
		<button>
			<video id="preview" style="display: none;"></video>
		</button>
</div>

</div>



	
	
	
	
<script type="text/javascript" src="index_files\instascan.min.js"></script>

<script>
	var isClicked = false;
	var video = document.createElement("video");
	var canvasElement = document.createElement("canvas");
	var canvas = canvasElement.getContext("2d");
	
	function scanQR() {
		document.getElementById('startButton').addEventListener('click', function() {
            document.getElementById('preview').style.display = 'block';
            let scanner = new Instascan.Scanner({ video: document.getElementById('preview') });
            scanner.addListener('scan', function (content) {
                console.log(content);
                document.getElementById('myInput').value = content;
                document.getElementById('preview').style.display = 'none'; // 隐藏视频元素
                scanner.stop(); // 停止扫描
            });
            Instascan.Camera.getCameras().then(function (cameras) {
                if (cameras.length > 0) {
                    scanner.start(cameras[1]); // 使用第二个摄像头，通常是前置摄像头
                } else {
                    console.error('No cameras found.');
                }
            }).catch(function (e) {
                console.error(e);
            });
        });
	}
	
	function postData() {
		if (!isClicked) {
    		isClicked = true;
			var inputVal = document.getElementById("myInput").value;
   			var xhr = new XMLHttpRequest();
   			xhr.open("POST", "https://api.gzx7301.top/logout", true);
   			xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
    		xhr.onreadystatechange = function() {
      		if (this.readyState === XMLHttpRequest.DONE && this.status === 200) {
     		    document.getElementById("unlock.result").innerText = this.responseText;
      		  }
   		 	 }
   			xhr.send("qr=" + inputVal);
    		setTimeout(function() {
     			isClicked = false;
   	 		 }, 500);  // 500毫秒后，允许再次点击
 		}
    
}


if(localStorage.pagecount)
    localStorage.pagecount = Number(localStorage.pagecount) + 1;
else
    localStorage.pagecount = 1;
document.getElementById("localStorage.pagecount").innerText = localStorage.pagecount;



</script>

</div></body></html>